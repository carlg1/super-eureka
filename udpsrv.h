#pragma once

/////////////////////////////////////////////////////////////////////////////////
// #includes
/////////////////////////////////////////////////////////////////////////////////
#include <stdint.h>

#include "epoller.h"


/////////////////////////////////////////////////////////////////////////////////
// Class Defintion
/////////////////////////////////////////////////////////////////////////////////
class UDPServer
{
public:
	UDPServer() = delete;
	UDPServer(uint16_t prt, char *bindadr = nullptr);
	~UDPServer();

	bool StartServer(EPoller *ep);
	bool StopServer();
	bool GetData();

 private:
	int srvfd;
	char *bindaddr;
	uint16_t port;
	epoller_cb_t epcb;

	static bool udpsrv_epoller_cb(void *obj, int events) {return ((UDPServer *) obj)->GetData();};
};
